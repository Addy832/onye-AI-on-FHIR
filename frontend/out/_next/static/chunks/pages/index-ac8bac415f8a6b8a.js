(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3908)}])},3908:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Home}});var a=t(5893),r=t(7294),l=t(9008),i=t.n(l),n=t(1177),c=t(3756),d=t(7653),o=t(9062),m=t(2566),x=t(9455),h=t(8814),u=t(6989),g=t(7764),p=t(1352),b=t(3217),j=t(9503),y=t(5077),v=t(6154);let N=v.Z.create({baseURL:"http://localhost:5000",timeout:3e4,headers:{"Content-Type":"application/json"}});N.interceptors.request.use(e=>{var s;console.log("\uD83D\uDE80 API Request: ".concat(null===(s=e.method)||void 0===s?void 0:s.toUpperCase()," ").concat(e.url));let t=localStorage.getItem("healthcareAuthToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>(console.error("❌ API Request Error:",e),Promise.reject(e))),N.interceptors.response.use(e=>{var s;return console.log("✅ API Response: ".concat(null===(s=e.config.method)||void 0===s?void 0:s.toUpperCase()," ").concat(e.config.url," - ").concat(e.status)),e},e=>{if(console.error("❌ API Response Error:",e.response||e),e.response)switch(e.response.status){case 401:console.warn("\uD83D\uDD10 Unauthorized - redirecting to login"),localStorage.removeItem("healthcareAuthToken");break;case 403:console.warn("\uD83D\uDEAB Forbidden - insufficient permissions");break;case 429:console.warn("⏰ Rate limit exceeded");break;case 500:console.error("\uD83D\uDD25 Server error")}return Promise.reject(e)});let healthCheck=async()=>{try{let e=await N.get("/api/health");return e.data}catch(e){throw Error("Health check failed: ".concat(e.message))}},processQuery=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let t=await N.post("/api/query",{query:e.trim(),max_results:s,use_advanced_nlp:!0,include_risk_analysis:!1});return t.data}catch(s){var t,a;let e=(null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||s.message;throw Error("Query processing failed: ".concat(e))}},getExamples=async()=>{try{let e=await N.get("/api/examples");return e.data}catch(e){throw Error("Failed to get examples: ".concat(e.message))}},getConditions=async()=>{try{let e=await N.get("/api/conditions");return e.data}catch(e){throw Error("Failed to get conditions: ".concat(e.message))}},formatPatientData=e=>e.map(e=>{var s,t,a,r,l,i,n;let c=null===(s=e.name)||void 0===s?void 0:s[0],d=null===(t=e.address)||void 0===t?void 0:t[0],o=null===(a=e.telecom)||void 0===a?void 0:a.find(e=>"phone"===e.system);return{id:e.id,name:c?"".concat((null===(r=c.given)||void 0===r?void 0:r[0])||""," ").concat(c.family||"").trim():"Unknown",gender:e.gender||"Unknown",birthDate:e.birthDate||"Unknown",age:e.birthDate?calculateAge(e.birthDate):"Unknown",address:d?"".concat(d.city||"",", ").concat(d.state||"").trim():"Unknown",phone:(null==o?void 0:o.value)||"Not provided",maritalStatus:(null===(n=e.maritalStatus)||void 0===n?void 0:null===(i=n.coding)||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.display)||"Unknown"}}),calculateAge=e=>{try{let s=new Date(e),t=new Date,a=t.getFullYear()-s.getFullYear(),r=t.getMonth()-s.getMonth();if(r<0||0===r&&t.getDate()<s.getDate())return a-1;return a}catch(e){return"Unknown"}},debounce=(e,s)=>{let t;return function(){for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),e(...r)},s)}},validateQuery=e=>{let s=e.trim();return s?s.length<3?{isValid:!1,error:"Query must be at least 3 characters long"}:s.length>200?{isValid:!1,error:"Query must be less than 200 characters"}:{isValid:!0,error:null}:{isValid:!1,error:"Please enter a healthcare query"}},useHealthcareQuery=()=>{let[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(null),[l,i]=(0,r.useState)(!1),[n,c]=(0,r.useState)(null),[d,o]=(0,r.useState)([]),m=(0,r.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=validateQuery(e);if(!t.isValid){c(t.error);return}i(!0),c(null);try{let t=await processQuery(e,s);a(t),o(s=>{var a;return[{id:Date.now(),query:e,timestamp:new Date().toISOString(),resultCount:(null===(a=t.statistics)||void 0===a?void 0:a.total_patients)||0},...s.slice(0,9)]}),c(null)}catch(e){c(e.message),a(null)}finally{i(!1)}},[]),x=(0,r.useCallback)(()=>{a(null),c(null)},[]),h=(0,r.useCallback)(()=>{o([])},[]);return{query:e,setQuery:s,results:t,loading:l,error:n,queryHistory:d,executeQuery:m,clearResults:x,clearHistory:h}},useExamples=()=>{let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(!0),[l,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let fetchExamples=async()=>{try{a(!0);let e=await getExamples();s(e.examples||[]),i(null)}catch(e){i(e.message),s([])}finally{a(!1)}};fetchExamples()},[]),{examples:e,loading:t,error:l}},useAutocomplete=()=>{let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{let fetchConditions=async()=>{try{i(!0);let e=await getConditions();s(e.conditions||[]),c(null)}catch(e){c(e.message),s([])}finally{i(!1)}};fetchConditions()},[]);let d=(0,r.useCallback)(s=>{if(!s||s.length<2){a([]);return}let t=s.toLowerCase(),r=e.filter(e=>e.text.toLowerCase().includes(t)||e.display.toLowerCase().includes(t)).slice(0,3).map(e=>({type:"condition",text:"Show me all patients with ".concat(e.text),description:e.display,category:e.category,confidence:.8})),l=[];for(let e of[{pattern:/^(show|find|list|get)\s+(me\s+)?(all\s+)?/i,suggestions:["Show me all diabetic patients over 50","Show me all female patients with hypertension","Show me all patients diagnosed with lung cancer recently","Show me all elderly patients with cardiovascular disease"]},{pattern:/^count/i,suggestions:["Count elderly women with diabetes and cardiovascular disease","Count male patients with depression","Count patients diagnosed with heart disease in the last year","Count female patients with breast cancer"]},{pattern:/diabet/i,suggestions:["Show me all diabetic patients over 50","Find diabetic patients diagnosed in the last year","Count elderly women with diabetes and cardiovascular disease","List all patients with diabetes complications"]},{pattern:/hypertension|blood pressure/i,suggestions:["Find female patients with hypertension under 65","Show patients with high blood pressure over 40","Count patients with uncontrolled hypertension","List elderly patients with hypertension and diabetes"]},{pattern:/heart|cardiac|cardiovascular/i,suggestions:["Show patients with cardiovascular conditions between ages 40-70","Find patients with heart disease","Count elderly women with diabetes and cardiovascular disease","List patients with recent heart attacks"]},{pattern:/cancer|tumor|malignant/i,suggestions:["Show me patients diagnosed with lung cancer recently","Find female patients with breast cancer","Count patients with cancer diagnosis in last 6 months","List all cancer patients under 65"]},{pattern:/depression|mental health|anxiety/i,suggestions:["Count male patients with depression","Find patients with mental health conditions","Show young adults with anxiety disorders","List patients with depression and diabetes"]},{pattern:/elderly|senior|older/i,suggestions:["Count elderly women with diabetes and cardiovascular disease","Show elderly patients with multiple conditions","Find senior patients diagnosed recently","List elderly patients with hypertension"]},{pattern:/female|women/i,suggestions:["Find female patients with hypertension under 65","Count elderly women with diabetes and cardiovascular disease","Show female patients with breast cancer","List women with reproductive health issues"]},{pattern:/male|men/i,suggestions:["Count male patients with depression","Show male patients with heart disease over 50","Find men with prostate conditions","List male patients with diabetes"]}])if(e.pattern.test(t)){e.suggestions.forEach((e,s)=>{var a;(e.toLowerCase().includes(t.substring(0,10))||t.includes((null===(a=e.split(" ")[2])||void 0===a?void 0:a.toLowerCase())||""))&&l.push({type:"smart_pattern",text:e,description:"Popular healthcare query",category:"Suggested",confidence:.9-.1*s})});break}let i=[];t.startsWith("show")&&t.length<10&&i.push({type:"completion",text:"Show me all diabetic patients over 50",description:"Complete your search"},{type:"completion",text:"Show me patients diagnosed with lung cancer recently",description:"Complete your search"}),t.startsWith("find")&&t.length<8&&i.push({type:"completion",text:"Find female patients with hypertension under 65",description:"Complete your search"},{type:"completion",text:"Find patients with heart disease",description:"Complete your search"}),t.startsWith("count")&&t.length<10&&i.push({type:"completion",text:"Count elderly women with diabetes and cardiovascular disease",description:"Complete your search"},{type:"completion",text:"Count male patients with depression",description:"Complete your search"});let n=[];Object.entries({dm:"diabetes mellitus",htn:"hypertension",mi:"myocardial infarction",cad:"coronary artery disease",copd:"chronic obstructive pulmonary disease",chf:"congestive heart failure"}).forEach(e=>{let[s,a]=e;(t.includes(s)||t.includes(a))&&n.push({type:"medical_term",text:"Show me all patients with ".concat(a),description:"".concat(s.toUpperCase()," - ").concat(a),category:"Medical Terms",confidence:.85})});let c=[...i,...l.slice(0,3),...r,...n.slice(0,2)].filter((e,s,t)=>s===t.findIndex(s=>s.text===e.text)).sort((e,s)=>(s.confidence||.5)-(e.confidence||.5)).slice(0,6);a(c)},[e]),o=(0,r.useCallback)(()=>{a([])},[]);return{conditions:e,suggestions:t,loading:l,error:n,generateSuggestions:d,clearSuggestions:o}};var components_SearchInput=e=>{let{value:s,onChange:t,onSubmit:l,loading:i=!1,placeholder:n="Ask a healthcare question...",showHistory:c=!0,queryHistory:d=[]}=e,[o,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(-1),[u,v]=(0,r.useState)(!1),N=(0,r.useRef)(null),f=(0,r.useRef)(null),{suggestions:w,generateSuggestions:C,clearSuggestions:k}=useAutocomplete(),S=debounce(C,300),handleSuggestionClick=e=>{let s=e.text||e.query;t(s),l(s),v(!1),h(-1)},formatQueryHistory=e=>{let s=new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return{...e,displayText:e.query,subtitle:"".concat(e.resultCount," results • ").concat(s)}},_=o&&u&&(w.length>0||c&&d.length>0);return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&(l(s.trim()),v(!1),k())},className:"relative",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5","aria-hidden":"true"}),(0,a.jsx)("input",{ref:N,type:"text",value:s,onChange:e=>{let s=e.target.value;t(s),S(s),h(-1),v(!0)},onKeyDown:e=>{let s=w.length+(c?d.length:0);switch(e.key){case"ArrowDown":e.preventDefault(),h(e=>e<s-1?e+1:-1);break;case"ArrowUp":e.preventDefault(),h(e=>e>-1?e-1:s-1);break;case"Enter":if(x>=0){e.preventDefault();let s=[...w,...c?d:[]],a=s[x],r=a.text||a.query;t(r),l(r),v(!1),h(-1)}break;case"Escape":var a;v(!1),h(-1),null===(a=N.current)||void 0===a||a.blur()}},onFocus:()=>{m(!0),(s.length>=2||d.length>0)&&v(!0)},onBlur:()=>{setTimeout(()=>{m(!1),v(!1),h(-1)},150)},placeholder:n,disabled:i,className:"medical-input pl-12 pr-20 text-lg","aria-label":"Healthcare query input","aria-expanded":_,"aria-haspopup":"listbox","aria-autocomplete":"list",autoComplete:"off"}),s&&!i&&(0,a.jsx)("button",{type:"button",onClick:()=>{var e;t(""),k(),v(!1),null===(e=N.current)||void 0===e||e.focus()},className:"absolute right-16 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 p-1","aria-label":"Clear search",children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{type:"submit",disabled:!s.trim()||i,className:"absolute right-2 top-1/2 transform -translate-y-1/2 btn-medical px-4 py-2 disabled:opacity-50","aria-label":"Search",children:i?(0,a.jsx)(b.Z,{className:"w-4 h-4 animate-spin"}):"Search"})]})}),_&&(0,a.jsxs)("div",{ref:f,className:"autocomplete-dropdown",role:"listbox","aria-label":"Search suggestions",children:[w.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50 border-b",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"w-3 h-3 mr-2"}),"Suggestions"]})}),w.map((e,s)=>(0,a.jsxs)("div",{className:"autocomplete-item ".concat(x===s?"selected":""),onClick:()=>handleSuggestionClick(e),role:"option","aria-selected":x===s,children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.text}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:e.description})]}),(0,a.jsxs)("div",{className:"ml-2 flex items-center space-x-2",children:[e.confidence&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-12 bg-gray-200 rounded-full h-1.5 mr-2",children:(0,a.jsx)("div",{className:"h-1.5 rounded-full ".concat(e.confidence>.8?"bg-green-500":e.confidence>.6?"bg-yellow-500":"bg-blue-500"),style:{width:"".concat(100*(e.confidence||.5),"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[Math.round(100*(e.confidence||.5)),"%"]})]}),e.category&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("smart_pattern"===e.type?"bg-purple-100 text-purple-700":"completion"===e.type?"bg-blue-100 text-blue-700":"medical_term"===e.type?"bg-green-100 text-green-700":"condition"===e.type?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:e.category})]})]},"suggestion-".concat(s)))]}),c&&d.length>0&&(0,a.jsxs)(a.Fragment,{children:[w.length>0&&(0,a.jsx)("div",{className:"border-t"}),(0,a.jsx)("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50 border-b",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3 mr-2"}),"Recent Queries"]})}),d.slice(0,5).map((e,s)=>{let t=w.length+s,r=formatQueryHistory(e);return(0,a.jsx)("div",{className:"autocomplete-item ".concat(x===t?"selected":""),onClick:()=>handleSuggestionClick(e),role:"option","aria-selected":x===t,children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:r.displayText}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:r.subtitle})]})},"history-".concat(e.id))})]}),0===w.length&&(!c||0===d.length)&&(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No suggestions available"})]}),!o&&!s&&(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:'Try: "Show me all diabetic patients over 50" or "Find female patients with hypertension"'})]})},f=t(8971),w=t(4979),C=t(4933),k=t(3025),S=t(4622),_=t(4976),A=t(9769),Z=t(7420),components_DataTable=e=>{let{results:s,loading:t=!1,onFilterChange:l,className:i=""}=e,[n,c]=(0,r.useState)({key:null,direction:"asc"}),[d,o]=(0,r.useState)(1),[m,x]=(0,r.useState)(10),[h,u]=(0,r.useState)(""),[b,j]=(0,r.useState)({gender:"",ageRange:"",condition:""}),{patients:y,conditions:v}=(0,r.useMemo)(()=>{var e;if(!(null==s?void 0:null===(e=s.results)||void 0===e?void 0:e.entry))return{patients:[],conditions:[]};let t=s.results.entry.filter(e=>"Patient"===e.resource.resourceType),a=s.results.entry.filter(e=>"Condition"===e.resource.resourceType),r=formatPatientData(t.map(e=>e.resource)),l=r.map(e=>{var s;let t=a.filter(s=>{var t,a;return null===(a=s.resource.subject)||void 0===a?void 0:null===(t=a.reference)||void 0===t?void 0:t.includes(e.id)}).map(e=>{var s,t,a,r,l,i,n,c,d;return{code:null===(a=e.resource.code)||void 0===a?void 0:null===(t=a.coding)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.code,display:null===(i=e.resource.code)||void 0===i?void 0:null===(l=i.coding)||void 0===l?void 0:null===(r=l[0])||void 0===r?void 0:r.display,status:null===(d=e.resource.clinicalStatus)||void 0===d?void 0:null===(c=d.coding)||void 0===c?void 0:null===(n=c[0])||void 0===n?void 0:n.display,onsetDate:e.resource.onsetDateTime}});return{...e,conditions:t,primaryCondition:(null===(s=t[0])||void 0===s?void 0:s.display)||"None specified"}});return{patients:l,conditions:a.map(e=>e.resource)}},[s]),N=(0,r.useMemo)(()=>{let e=[...y];if(h&&(e=e.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.primaryCondition.toLowerCase().includes(h.toLowerCase())||e.address.toLowerCase().includes(h.toLowerCase()))),b.gender&&(e=e.filter(e=>e.gender.toLowerCase()===b.gender.toLowerCase())),b.ageRange){let[s,t]=b.ageRange.split("-").map(Number);e=e.filter(e=>{let a="number"==typeof e.age?e.age:0;return t?a>=s&&a<=t:a>=s})}return e},[y,h,b]),D=(0,r.useMemo)(()=>n.key?[...N].sort((e,s)=>{let t=e[n.key],a=s[n.key],r=0;return t>a&&(r=1),t<a&&(r=-1),"desc"===n.direction?-1*r:r}):N,[N,n]),R=(0,r.useMemo)(()=>{let e=(d-1)*m;return D.slice(e,e+m)},[D,d,m]),F=Math.ceil(D.length/m),handleSort=e=>{c(s=>({key:e,direction:s.key===e&&"asc"===s.direction?"desc":"asc"}))},handleFilterChange=(e,s)=>{let t={...b,[e]:s};j(t),o(1),l&&l(t)},renderSortIcon=e=>n.key!==e?(0,a.jsx)(f.Z,{className:"w-4 h-4 text-gray-400"}):"asc"===n.direction?(0,a.jsx)(w.Z,{className:"w-4 h-4 text-medical-600"}):(0,a.jsx)(f.Z,{className:"w-4 h-4 text-medical-600"});return t?(0,a.jsx)("div",{className:"".concat(i),children:(0,a.jsx)("div",{className:"medical-table",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:["Name","Gender","Age","Address","Condition"].map((e,s)=>(0,a.jsx)("th",{children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded loading-shimmer"})},s))})}),(0,a.jsx)("tbody",{children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("tr",{children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"h-4 bg-gray-100 rounded loading-shimmer"})},s))},s))})]})})}):s&&y.length?(0,a.jsxs)("div",{className:"".concat(i),children:[(0,a.jsxs)("div",{className:"bg-white rounded-t-xl border border-medical-100 p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)(C.Z,{className:"w-5 h-5 text-medical-600 mr-2"}),"Patient Data (",D.length," patients)"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Healthcare information for query results"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value),placeholder:"Search patients...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500 text-sm w-full sm:w-64"}),h&&(0,a.jsx)("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("button",{onClick:()=>{let e=["Name,Gender,Age,Address,Phone,Primary Condition,Marital Status",...D.map(e=>[e.name,e.gender,e.age,e.address,e.phone,e.primaryCondition,e.maritalStatus].join(","))].join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="patient-data.csv",a.click(),window.URL.revokeObjectURL(t)},className:"btn-outline flex items-center px-4 py-2 text-sm",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap gap-4",children:[(0,a.jsxs)("select",{value:b.gender,onChange:e=>handleFilterChange("gender",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500 text-sm",children:[(0,a.jsx)("option",{value:"",children:"All Genders"}),(0,a.jsx)("option",{value:"male",children:"Male"}),(0,a.jsx)("option",{value:"female",children:"Female"})]}),(0,a.jsxs)("select",{value:b.ageRange,onChange:e=>handleFilterChange("ageRange",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-medical-500 focus:border-medical-500 text-sm",children:[(0,a.jsx)("option",{value:"",children:"All Ages"}),(0,a.jsx)("option",{value:"0-30",children:"0-30 years"}),(0,a.jsx)("option",{value:"31-50",children:"31-50 years"}),(0,a.jsx)("option",{value:"51-65",children:"51-65 years"}),(0,a.jsx)("option",{value:"66-120",children:"65+ years"})]}),(b.gender||b.ageRange||h)&&(0,a.jsxs)("button",{onClick:()=>{j({gender:"",ageRange:"",condition:""}),u(""),o(1)},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 flex items-center",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),"Clear Filters"]})]})]}),(0,a.jsx)("div",{className:"medical-table rounded-t-none border-t-0",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"cursor-pointer hover:bg-medical-100",onClick:()=>handleSort("name"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:["Name",renderSortIcon("name")]})}),(0,a.jsx)("th",{className:"cursor-pointer hover:bg-medical-100",onClick:()=>handleSort("gender"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:["Gender",renderSortIcon("gender")]})}),(0,a.jsx)("th",{className:"cursor-pointer hover:bg-medical-100",onClick:()=>handleSort("age"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:["Age",renderSortIcon("age")]})}),(0,a.jsx)("th",{children:"Address"}),(0,a.jsx)("th",{children:"Contact"}),(0,a.jsx)("th",{children:"Primary Condition"}),(0,a.jsx)("th",{children:"Status"})]})}),(0,a.jsx)("tbody",{children:R.map((e,s)=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-medical-100 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)(C.Z,{className:"w-4 h-4 text-medical-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",(null===(t=e.id)||void 0===t?void 0:t.slice(0,8))||"N/A"]})]})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("male"===e.gender?"bg-blue-100 text-blue-700":"bg-pink-100 text-pink-700"),children:e.gender})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),e.age," years"]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:e.address})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:e.phone})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 text-danger-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:e.primaryCondition})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"})})]},e.id||s)})})]})}),F>1&&(0,a.jsx)("div",{className:"bg-white border border-medical-100 border-t-0 rounded-b-xl px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",Math.min((d-1)*m+1,D.length)," to"," ",Math.min(d*m,D.length)," of"," ",D.length," results"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>o(e=>Math.max(1,e-1)),disabled:1===d,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,F)},(e,s)=>{let t=d<=3?s+1:d-2+s;return t>F?null:(0,a.jsx)("button",{onClick:()=>o(t),className:"px-3 py-2 text-sm border rounded-lg ".concat(d===t?"bg-medical-600 text-white border-medical-600":"border-gray-300 hover:bg-gray-50"),children:t},t)})}),(0,a.jsx)("button",{onClick:()=>o(e=>Math.min(F,e+1)),disabled:d===F,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})})]}):(0,a.jsx)("div",{className:"".concat(i),children:(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)(C.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{children:"No patient data available"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Submit a query to see patient information"})]})})},D=t(3148),R=t(6495),F=t(9525),I=t(9858);D.kL.register(D.uw,D.f$,D.ZL,D.qi,D.Dx,D.u,D.De,D.jn,D.od);let L={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(14, 165, 233, 0.8)",borderWidth:1}}},AgeDistributionChart=e=>{let{data:s,title:t="Age Distribution"}=e;if(!s||0===Object.keys(s).length)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"No age data available"});let r={labels:Object.keys(s),datasets:[{label:"Number of Patients",data:Object.values(s),backgroundColor:["rgba(14, 165, 233, 0.6)","rgba(34, 197, 94, 0.6)","rgba(245, 158, 11, 0.6)","rgba(239, 68, 68, 0.6)","rgba(147, 51, 234, 0.6)","rgba(236, 72, 153, 0.6)"],borderColor:["rgba(14, 165, 233, 1)","rgba(34, 197, 94, 1)","rgba(245, 158, 11, 1)","rgba(239, 68, 68, 1)","rgba(147, 51, 234, 1)","rgba(236, 72, 153, 1)"],borderWidth:2}]},l={...L,scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return(0,a.jsxs)("div",{className:"chart-container",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(F.Z,{className:"w-5 h-5 text-medical-600 mr-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(R.$Q,{data:r,options:l})})]})},GenderDistributionChart=e=>{let{data:s,title:t="Gender Distribution"}=e;if(!s||0===Object.keys(s).length)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"No gender data available"});let r={labels:Object.keys(s).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),datasets:[{data:Object.values(s),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(14, 165, 233, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(14, 165, 233, 1)"],borderWidth:2}]},l={...L,plugins:{...L.plugins,legend:{position:"right",labels:{usePointStyle:!0,padding:20}}}};return(0,a.jsxs)("div",{className:"chart-container",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-medical-600 mr-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(R.by,{data:r,options:l})})]})},ConditionDistributionChart=e=>{let{data:s,title:t="Medical Conditions"}=e;if(!s||0===Object.keys(s).length)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"No condition data available"});let truncateLabel=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length<=s?e:e.substring(0,s)+"..."},r={labels:Object.keys(s).map(e=>truncateLabel(e)),datasets:[{label:"Number of Cases",data:Object.values(s),backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2}]},l={...L,indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{stepSize:1}}}};return(0,a.jsxs)("div",{className:"chart-container",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(Z.Z,{className:"w-5 h-5 text-medical-600 mr-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(R.$Q,{data:r,options:l})})]})},StatsSummary=e=>{let{statistics:s}=e;if(!s)return(0,a.jsx)("div",{className:"text-center text-gray-500",children:"No statistics available"});let t=[{label:"Total Patients",value:s.total_patients||0,icon:F.Z,color:"text-medical-600",bgColor:"bg-medical-50"},{label:"Medical Conditions",value:s.total_conditions||0,icon:Z.Z,color:"text-danger-600",bgColor:"bg-danger-50"},{label:"Average Age",value:s.average_age?"".concat(Math.round(s.average_age)," years"):"N/A",icon:I.Z,color:"text-health-600",bgColor:"bg-health-50"}];return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:t.map((e,s)=>{let t=e.icon;return(0,a.jsx)("div",{className:"medical-card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat(e.bgColor," mr-4"),children:(0,a.jsx)(t,{className:"w-6 h-6 ".concat(e.color)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.label})]})]})},s)})})},ChartsLoading=()=>(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"medical-card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg loading-shimmer mr-4"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded loading-shimmer mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded loading-shimmer w-24"})]})]})},s))}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"chart-container",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded loading-shimmer mb-4 w-48"}),(0,a.jsx)("div",{className:"h-64 bg-gray-100 rounded loading-shimmer"})]},s))})]});var DataCharts=e=>{let{statistics:s,className:t=""}=e;return s?(0,a.jsxs)("div",{className:"".concat(t),children:[(0,a.jsx)(StatsSummary,{statistics:s}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.age_distribution&&(0,a.jsx)(AgeDistributionChart,{data:s.age_distribution,title:"Patient Age Distribution"}),s.gender_distribution&&(0,a.jsx)(GenderDistributionChart,{data:s.gender_distribution,title:"Patient Gender Distribution"})]}),s.condition_distribution&&Object.keys(s.condition_distribution).length>0&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(ConditionDistributionChart,{data:s.condition_distribution,title:"Medical Conditions Distribution"})})]}):(0,a.jsx)("div",{className:"".concat(t),children:(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{children:"No data to visualize"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Submit a query to see charts and statistics"})]})})},E=t(1981),P=t(2701),H=t(2795);let safeRender=e=>{try{if(null==e)return"";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return String(e);if("object"==typeof e){if(Array.isArray(e))return e.join(", ");return JSON.stringify(e)}return String(e)}catch(s){return console.warn("Error rendering value:",e,s),"[Error rendering value]"}};var components_QueryAnalysis=e=>{let{results:s,loading:t}=e;if(t)return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-lg mr-3"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-48"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})});if(!s)return null;let r=s.entities||{},l=r.fhir_params||{};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Query Analysis"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Natural Language Processing Results"})]})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 text-gray-600 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Original Query"})]}),(0,a.jsxs)("p",{className:"text-gray-900 font-mono text-sm bg-white p-3 rounded border",children:['"',s.query,'"']})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(E.Z,{className:"w-4 h-4 text-green-600 mr-2"}),(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-800",children:"Extracted Information"})]}),r.action&&(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(o.Z,{className:"w-3 h-3 text-green-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-green-800",children:"Action"})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:safeRender(r.action)})]}),r.demographics&&Object.keys(r.demographics).length>0&&(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(C.Z,{className:"w-3 h-3 text-blue-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-blue-800",children:"Demographics"})]}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(r.demographics).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-xs text-blue-700 mr-2 capitalize",children:[s,":"]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:safeRender(t)})]},s)})})]}),r.age_filters&&Object.keys(r.age_filters).length>0&&(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3 text-purple-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-purple-800",children:"Age Filters"})]}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(r.age_filters).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"text-xs text-purple-700 mr-2 capitalize",children:[s.replace("_"," "),":"]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:safeRender(t)})]},s)})})]}),r.time_filters&&Object.keys(r.time_filters).length>0&&(0,a.jsxs)("div",{className:"bg-teal-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3 text-teal-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-teal-800",children:"Time Constraints"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[r.time_filters.time_phrase&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-xs text-teal-700 mr-2",children:"Period:"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-800",children:safeRender(r.time_filters.time_phrase)})]}),r.time_filters.after_date&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-xs text-teal-700 mr-2",children:"After:"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-800",children:safeRender(r.time_filters.after_date)})]}),r.time_filters.days_back&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-xs text-teal-700 mr-2",children:"Days back:"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-800",children:safeRender(r.time_filters.days_back)})]})]})]}),r.conditions&&r.conditions.length>0&&(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(d.Z,{className:"w-3 h-3 text-red-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-red-800",children:"Medical Conditions"})]}),(0,a.jsx)("div",{className:"space-y-2",children:r.conditions.map((e,s)=>(0,a.jsx)("div",{className:"bg-white p-2 rounded border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:safeRender(e.text)}),e.code&&(0,a.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:safeRender(e.code)})]})},s))})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(P.Z,{className:"w-4 h-4 text-blue-600 mr-2"}),(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-800",children:"FHIR Search Parameters"})]}),l.resource_type&&(0,a.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(H.Z,{className:"w-3 h-3 text-indigo-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-indigo-800",children:"Resource Type"})]}),(0,a.jsx)("code",{className:"text-sm font-mono text-indigo-900 bg-white px-2 py-1 rounded border",children:l.resource_type})]}),l.search_params&&Object.keys(l.search_params).length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(g.Z,{className:"w-3 h-3 text-gray-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-800",children:"Search Parameters"})]}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(l.search_params).map(e=>{let[s,t]=e;return(0,a.jsx)("div",{className:"bg-white p-2 rounded border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700",children:s}),(0,a.jsx)("code",{className:"text-xs font-mono text-gray-900 bg-gray-100 px-2 py-0.5 rounded",children:safeRender(t)})]})},s)})})]}),l.include&&l.include.length>0&&(0,a.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(H.Z,{className:"w-3 h-3 text-yellow-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-yellow-800",children:"Include"})]}),(0,a.jsx)("div",{className:"space-y-1",children:l.include.map((e,s)=>(0,a.jsx)("code",{className:"text-xs font-mono text-yellow-900 bg-white px-2 py-1 rounded border block",children:safeRender(e)},s))})]}),l.sort&&l.sort.length>0&&(0,a.jsxs)("div",{className:"bg-cyan-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(P.Z,{className:"w-3 h-3 text-cyan-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-cyan-800",children:"Sort"})]}),(0,a.jsx)("div",{className:"space-y-1",children:l.sort.map((e,s)=>(0,a.jsx)("code",{className:"text-xs font-mono text-cyan-900 bg-white px-2 py-1 rounded border block",children:safeRender(e)},s))})]}),l.count&&(0,a.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(o.Z,{className:"w-3 h-3 text-orange-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-orange-800",children:"Result Limit"})]}),(0,a.jsx)("code",{className:"text-sm font-mono text-orange-900 bg-white px-2 py-1 rounded border",children:l.count})]})]})]}),r.raw_biobert_entities&&r.raw_biobert_entities.length>0&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-purple-600 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-purple-800",children:"Raw BioBERT Entity Detection"}),(0,a.jsxs)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:[r.raw_biobert_entities.length," detected"]})]}),(0,a.jsx)("p",{className:"text-xs text-purple-700 mb-3",children:"Complete list of all medical entities detected by the BioBERT NER model:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:r.raw_biobert_entities.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg p-3 border border-purple-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e.label}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 font-mono",children:[(100*e.confidence).toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:e.text}),void 0!==e.start&&void 0!==e.end&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Position: ",e.start,"-",e.end]})]},s))}),(0,a.jsx)("div",{className:"mt-3 p-3 bg-purple-100 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-purple-700",children:[(0,a.jsx)("strong",{children:"Note:"})," This shows all entities detected by BioBERT with confidence scores. The system uses additional filtering and processing to determine which entities are used for the actual FHIR search."]})})]}),s.fhir_url&&(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(H.Z,{className:"w-4 h-4 text-green-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-200",children:"Generated FHIR URL"})]}),(0,a.jsx)("code",{className:"text-xs text-green-400 font-mono break-all block bg-gray-800 p-3 rounded",children:s.fhir_url})]})]})]})},T=t(3546),O=t(5637),Q=t(443),q=t(3587),U=t(4199),B=t(4844),components_BackendStatus=()=>{let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0),[i,n]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let fetchBackendInfo=async()=>{try{l(!0);let e=await healthCheck();s(e),n(null)}catch(e){n(e.message),s(null)}finally{l(!1)}};fetchBackendInfo();let e=setInterval(fetchBackendInfo,3e4);return()=>clearInterval(e)},[]),t)return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"animate-pulse flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-lg mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})});let o=!i&&e,m=e?e.fhir_server?{name:"Real FHIR Server",description:"Connected to ".concat(e.fhir_server.name||"HAPI FHIR")}:e.service&&e.service.includes("Enhanced")?{name:"Enhanced Backend",description:"Advanced NLP with fallback options"}:{name:"FHIR Simulator",description:"Local simulated healthcare data"}:{name:"Unknown",description:"Backend unavailable"};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 ".concat(o?"border-l-4 border-l-green-500":"border-l-4 border-l-red-500"),children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg mr-3 ".concat(o?"bg-green-100":"bg-red-100"),children:o?(0,a.jsx)(c.Z,{className:"w-5 h-5 text-green-600"}):(0,a.jsx)(d.Z,{className:"w-5 h-5 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Backend Status"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:o?"Connected":"Offline"})]})]}),(0,a.jsx)("div",{className:"flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(o?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,{className:"w-3 h-3 mr-1"}),"Online"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{className:"w-3 h-3 mr-1"}),"Offline"]})})]})}),(0,a.jsx)("div",{className:"p-4 space-y-3",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(Q.Z,{className:"w-3 h-3 text-blue-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-blue-800",children:"Service"})]}),(0,a.jsx)("p",{className:"text-sm font-mono text-blue-900",children:e.service||"AI on FHIR Backend"}),e.version&&(0,a.jsxs)("p",{className:"text-xs text-blue-700",children:["v",e.version]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)(q.Z,{className:"w-3 h-3 text-purple-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-purple-800",children:"Data Source"})]}),(0,a.jsx)("p",{className:"text-xs font-semibold text-purple-900",children:m.name}),(0,a.jsx)("p",{className:"text-xs text-purple-700",children:m.description})]})]}),e.features&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(U.Z,{className:"w-3 h-3 text-gray-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-800",children:"Features"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:Object.entries(e.features).map(e=>{let[s,t]=e;return(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(t?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:[t?"✓":"✗"," ",s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()).replace("Nlp","NLP").replace("Api","API")]},s)})})]}),e.fhir_server&&(0,a.jsxs)("div",{className:"bg-cyan-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(B.Z,{className:"w-3 h-3 text-cyan-600 mr-1"}),(0,a.jsx)("span",{className:"text-xs font-medium text-cyan-800",children:"FHIR Server"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-xs",children:[(0,a.jsx)("span",{className:"font-medium",children:"Name:"})," ",e.fhir_server.name||"Unknown"]}),(0,a.jsxs)("p",{className:"text-xs",children:[(0,a.jsx)("span",{className:"font-medium",children:"Version:"})," ",e.fhir_server.fhirVersion||"Unknown"]}),e.fhir_server.url&&(0,a.jsxs)("p",{className:"text-xs break-all",children:[(0,a.jsx)("span",{className:"font-medium",children:"URL:"})," ",e.fhir_server.url]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3 mr-1"}),"Last checked: ",new Date().toLocaleTimeString()]}),e.timestamp&&(0,a.jsxs)("div",{children:["Server time: ",new Date(e.timestamp).toLocaleTimeString()]})]})]}):(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(O.Z,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-red-600 font-medium mb-1",children:"Backend Unavailable"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Cannot connect to the backend server. Please ensure the Python server is running on localhost:5000."}),(0,a.jsx)("div",{className:"mt-3 p-2 bg-red-50 rounded border-l-4 border-red-400",children:(0,a.jsx)("p",{className:"text-xs text-red-700",children:i})})]})})]})};function Home(){var e,s;let[t,l]=(0,r.useState)("charts"),[g,p]=(0,r.useState)("checking"),{query:b,setQuery:j,results:y,loading:v,error:N,queryHistory:f,executeQuery:w,clearResults:C}=useHealthcareQuery(),{examples:k,loading:S}=useExamples();(0,r.useEffect)(()=>{let checkApiHealth=async()=>{try{await healthCheck(),p("healthy")}catch(e){p("error"),console.error("API health check failed:",e)}};checkApiHealth()},[]);let handleQuerySubmit=async e=>{await w(e,10)},handleExampleClick=e=>{j(e),handleQuerySubmit(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"AI on FHIR - Healthcare Data Querying System"}),(0,a.jsx)("meta",{name:"description",content:"Natural language querying for FHIR-compliant healthcare data"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-medical-100 rounded-lg mr-3",children:(0,a.jsx)(n.Z,{className:"w-6 h-6 text-medical-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"AI on FHIR"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Healthcare Data Querying"})]})]})}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm ".concat("healthy"===g?"bg-health-100 text-health-700":"error"===g?"bg-danger-100 text-danger-700":"bg-gray-100 text-gray-700"),children:"healthy"===g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"API Connected"]}):"error"===g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"API Offline"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 animate-pulse"}),"Checking..."]})})})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,a.jsx)(m.Z,{className:"w-12 h-12 text-medical-600 mr-3"}),(0,a.jsx)(x.Z,{className:"w-12 h-12 text-health-600"})]}),(0,a.jsx)("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Natural Language Healthcare Queries"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Ask questions about patient data in plain English. Our AI processes your queries and returns FHIR-compliant healthcare information with interactive visualizations."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[(0,a.jsxs)("div",{className:"medical-card p-6 text-center",children:[(0,a.jsx)(m.Z,{className:"w-8 h-8 text-medical-600 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Smart NLP Processing"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Advanced natural language understanding for healthcare queries"})]}),(0,a.jsxs)("div",{className:"health-card p-6 text-center",children:[(0,a.jsx)(o.Z,{className:"w-8 h-8 text-health-600 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"FHIR Compliant"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Standards-based healthcare data interoperability"})]}),(0,a.jsxs)("div",{className:"medical-card p-6 text-center",children:[(0,a.jsx)(x.Z,{className:"w-8 h-8 text-medical-600 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"HIPAA Secure"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Healthcare-grade security and privacy protection"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(components_BackendStatus,{})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"medical-card p-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Ask Your Healthcare Question"}),(0,a.jsx)(components_SearchInput,{value:b,onChange:j,onSubmit:handleQuerySubmit,loading:v,queryHistory:f,placeholder:"e.g., Show me all diabetic patients over 50..."}),N&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-danger-50 border border-danger-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-danger-600 mr-2"}),(0,a.jsx)("span",{className:"text-danger-700 font-medium",children:"Query Error"})]}),(0,a.jsx)("p",{className:"text-danger-600 mt-1",children:N})]})]})})]}),!y&&!v&&k.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 text-center",children:"Try These Example Queries"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:k.slice(0,4).map((e,s)=>(0,a.jsx)("button",{onClick:()=>handleExampleClick(e.query),className:"p-4 bg-white border border-gray-200 rounded-lg hover:border-medical-300 hover:shadow-md transition-all duration-200 text-left group",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900 group-hover:text-medical-700 mb-1",children:['"',e.query,'"']}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-medical-100 text-medical-700",children:e.use_case})})]}),(0,a.jsx)(h.Z,{className:"w-4 h-4 text-gray-400 group-hover:text-medical-600 ml-2 flex-shrink-0"})]})},s))})]}),(y||v)&&(0,a.jsxs)("div",{className:"space-y-8",children:[y&&(0,a.jsx)("div",{className:"bg-medical-50 border border-medical-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-medical-600 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-medical-900",children:['Query: "',y.query,'"']}),(0,a.jsxs)("p",{className:"text-sm text-medical-700",children:["Found ",(null===(e=y.statistics)||void 0===e?void 0:e.total_patients)||0," patients • Processed in ",y.processing_time_ms?"".concat(y.processing_time_ms,"ms"):"unknown time",(null===(s=y.features_used)||void 0===s?void 0:s.advanced_nlp)&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:"Advanced NLP"})]})]})]}),(0,a.jsx)("button",{onClick:C,className:"text-medical-600 hover:text-medical-800 text-sm",children:"Clear Results"})]})}),(0,a.jsx)(components_QueryAnalysis,{results:y,loading:v}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,a.jsxs)("button",{onClick:()=>l("charts"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("charts"===t?"border-medical-500 text-medical-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 inline mr-2"}),"Data Visualization"]}),(0,a.jsxs)("button",{onClick:()=>l("table"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("table"===t?"border-medical-500 text-medical-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 inline mr-2"}),"Data Table"]})]})}),(0,a.jsxs)("div",{className:"p-6",children:["charts"===t&&(0,a.jsx)(a.Fragment,{children:v?(0,a.jsx)(ChartsLoading,{}):(0,a.jsx)(DataCharts,{statistics:null==y?void 0:y.statistics})}),"table"===t&&(0,a.jsx)(components_DataTable,{results:y,loading:v})]})]})]})]}),(0,a.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-16",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Built for the AI on FHIR Full-Stack Engineer Assessment"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Demonstrating healthcare data interoperability, NLP processing, and HIPAA-compliant design"})]})})})]})]})}}},function(e){e.O(0,[196,904,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);